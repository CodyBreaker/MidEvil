import{j as d,c as ee,f as We,g as Ve,r as U,e as et,h as K}from"../../assets/Settings.8zenADvn.js";function tt({game:s}){return d.jsxs("div",{className:"roomcode uppercase",children:[d.jsx("h1",{children:"ROOM CODE:"}),d.jsx("h2",{children:s?.room_code})]})}function ot({className:s,...l}){return d.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:d.jsx("table",{"data-slot":"table",className:ee("w-full caption-bottom text-sm",s),...l})})}function nt({className:s,...l}){return d.jsx("thead",{"data-slot":"table-header",className:ee("[&_tr]:border-b",s),...l})}function rt({className:s,...l}){return d.jsx("tbody",{"data-slot":"table-body",className:ee("[&_tr:last-child]:border-0",s),...l})}function pe({className:s,...l}){return d.jsx("tr",{"data-slot":"table-row",className:ee("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...l})}function le({className:s,...l}){return d.jsx("th",{"data-slot":"table-head",className:ee("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function re({className:s,...l}){return d.jsx("td",{"data-slot":"table-cell",className:ee("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...l})}function it({className:s,...l}){return d.jsx("caption",{"data-slot":"table-caption",className:ee("text-muted-foreground mt-4 text-sm",s),...l})}function st({players:s,pawns:l}){return d.jsxs("div",{className:"playerlist",children:[d.jsx("h1",{children:"Player list:"}),d.jsxs(ot,{className:"players",children:[d.jsx(it,{children:"These guys are kind of stupid..."}),d.jsx(nt,{children:d.jsxs(pe,{children:[d.jsx(le,{className:"w-[100px]",style:{fontWeight:"bold"},children:"PlayerNr"}),d.jsx(le,{className:"w-[200px]",style:{fontWeight:"bold"},children:"Player"}),d.jsx(le,{style:{fontWeight:"bold"},children:"Pawn Names"}),d.jsx(le,{style:{fontWeight:"bold"},children:"Status"})]})}),d.jsx(rt,{children:s&&s.length>0?s.map((o,a)=>{const g=l?.filter(n=>n.owner_id===o.id)??[];return d.jsxs(pe,{children:[d.jsx(re,{className:"w-[100px]",children:a+1}),d.jsx(re,{children:o.name}),d.jsx(re,{children:g.length>0?g.map(n=>n.pawn_name).join(", "):"-"}),d.jsx(re,{children:o.is_ready?"Ready":"Unready"})]},o.id??a)}):d.jsx(pe,{children:d.jsx(re,{colSpan:3,children:"No players connected"})})})]})]})}var ne={},ge={exports:{}},me,Re;function at(){if(Re)return me;Re=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return me=s,me}var ve,je;function lt(){if(je)return ve;je=1;var s=at();function l(){}function o(){}return o.resetWarningCache=l,ve=function(){function a(h,i,t,e,c,r){if(r!==s){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}a.isRequired=a;function g(){return a}var n={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:g,element:a,elementType:a,instanceOf:g,node:a,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:o,resetWarningCache:l};return n.PropTypes=n,n},ve}var Be;function qe(){return Be||(Be=1,ge.exports=lt()()),ge.exports}var we,$e;function Ge(){return $e||($e=1,we={L:1,M:0,Q:3,H:2}),we}var xe,Ne;function Xe(){return Ne||(Ne=1,xe={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),xe}var ye,De;function dt(){if(De)return ye;De=1;var s=Xe();function l(o){this.mode=s.MODE_8BIT_BYTE,this.data=o}return l.prototype={getLength:function(o){return this.data.length},write:function(o){for(var a=0;a<this.data.length;a++)o.put(this.data.charCodeAt(a),8)}},ye=l,ye}var be,Ae;function ct(){if(Ae)return be;Ae=1;var s=Ge();function l(o,a){this.totalCount=o,this.dataCount=a}return l.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],l.getRSBlocks=function(o,a){var g=l.getRsBlockTable(o,a);if(g==null)throw new Error("bad rs block @ typeNumber:"+o+"/errorCorrectLevel:"+a);for(var n=g.length/3,h=new Array,i=0;i<n;i++)for(var t=g[i*3+0],e=g[i*3+1],c=g[i*3+2],r=0;r<t;r++)h.push(new l(e,c));return h},l.getRsBlockTable=function(o,a){switch(a){case s.L:return l.RS_BLOCK_TABLE[(o-1)*4+0];case s.M:return l.RS_BLOCK_TABLE[(o-1)*4+1];case s.Q:return l.RS_BLOCK_TABLE[(o-1)*4+2];case s.H:return l.RS_BLOCK_TABLE[(o-1)*4+3];default:return}},be=l,be}var Pe,Le;function ut(){if(Le)return Pe;Le=1;function s(){this.buffer=new Array,this.length=0}return s.prototype={get:function(l){var o=Math.floor(l/8);return(this.buffer[o]>>>7-l%8&1)==1},put:function(l,o){for(var a=0;a<o;a++)this.putBit((l>>>o-a-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(l){var o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),l&&(this.buffer[o]|=128>>>this.length%8),this.length++}},Pe=s,Pe}var _e,Me;function Ye(){if(Me)return _e;Me=1;for(var s={glog:function(o){if(o<1)throw new Error("glog("+o+")");return s.LOG_TABLE[o]},gexp:function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return s.EXP_TABLE[o]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)s.EXP_TABLE[l]=1<<l;for(var l=8;l<256;l++)s.EXP_TABLE[l]=s.EXP_TABLE[l-4]^s.EXP_TABLE[l-5]^s.EXP_TABLE[l-6]^s.EXP_TABLE[l-8];for(var l=0;l<255;l++)s.LOG_TABLE[s.EXP_TABLE[l]]=l;return _e=s,_e}var Te,Ie;function Je(){if(Ie)return Te;Ie=1;var s=Ye();function l(o,a){if(o.length==null)throw new Error(o.length+"/"+a);for(var g=0;g<o.length&&o[g]==0;)g++;this.num=new Array(o.length-g+a);for(var n=0;n<o.length-g;n++)this.num[n]=o[n+g]}return l.prototype={get:function(o){return this.num[o]},getLength:function(){return this.num.length},multiply:function(o){for(var a=new Array(this.getLength()+o.getLength()-1),g=0;g<this.getLength();g++)for(var n=0;n<o.getLength();n++)a[g+n]^=s.gexp(s.glog(this.get(g))+s.glog(o.get(n)));return new l(a,0)},mod:function(o){if(this.getLength()-o.getLength()<0)return this;for(var a=s.glog(this.get(0))-s.glog(o.get(0)),g=new Array(this.getLength()),n=0;n<this.getLength();n++)g[n]=this.get(n);for(var n=0;n<o.getLength();n++)g[n]^=s.gexp(s.glog(o.get(n))+a);return new l(g,0).mod(o)}},Te=l,Te}var Se,Oe;function ft(){if(Oe)return Se;Oe=1;var s=Xe(),l=Je(),o=Ye(),a={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},g={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(n){for(var h=n<<10;g.getBCHDigit(h)-g.getBCHDigit(g.G15)>=0;)h^=g.G15<<g.getBCHDigit(h)-g.getBCHDigit(g.G15);return(n<<10|h)^g.G15_MASK},getBCHTypeNumber:function(n){for(var h=n<<12;g.getBCHDigit(h)-g.getBCHDigit(g.G18)>=0;)h^=g.G18<<g.getBCHDigit(h)-g.getBCHDigit(g.G18);return n<<12|h},getBCHDigit:function(n){for(var h=0;n!=0;)h++,n>>>=1;return h},getPatternPosition:function(n){return g.PATTERN_POSITION_TABLE[n-1]},getMask:function(n,h,i){switch(n){case a.PATTERN000:return(h+i)%2==0;case a.PATTERN001:return h%2==0;case a.PATTERN010:return i%3==0;case a.PATTERN011:return(h+i)%3==0;case a.PATTERN100:return(Math.floor(h/2)+Math.floor(i/3))%2==0;case a.PATTERN101:return h*i%2+h*i%3==0;case a.PATTERN110:return(h*i%2+h*i%3)%2==0;case a.PATTERN111:return(h*i%3+(h+i)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}},getErrorCorrectPolynomial:function(n){for(var h=new l([1],0),i=0;i<n;i++)h=h.multiply(new l([1,o.gexp(i)],0));return h},getLengthInBits:function(n,h){if(1<=h&&h<10)switch(n){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:return 8;case s.MODE_KANJI:return 8;default:throw new Error("mode:"+n)}else if(h<27)switch(n){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+n)}else if(h<41)switch(n){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+n)}else throw new Error("type:"+h)},getLostPoint:function(n){for(var h=n.getModuleCount(),i=0,t=0;t<h;t++)for(var e=0;e<h;e++){for(var c=0,r=n.isDark(t,e),u=-1;u<=1;u++)if(!(t+u<0||h<=t+u))for(var m=-1;m<=1;m++)e+m<0||h<=e+m||u==0&&m==0||r==n.isDark(t+u,e+m)&&c++;c>5&&(i+=3+c-5)}for(var t=0;t<h-1;t++)for(var e=0;e<h-1;e++){var v=0;n.isDark(t,e)&&v++,n.isDark(t+1,e)&&v++,n.isDark(t,e+1)&&v++,n.isDark(t+1,e+1)&&v++,(v==0||v==4)&&(i+=3)}for(var t=0;t<h;t++)for(var e=0;e<h-6;e++)n.isDark(t,e)&&!n.isDark(t,e+1)&&n.isDark(t,e+2)&&n.isDark(t,e+3)&&n.isDark(t,e+4)&&!n.isDark(t,e+5)&&n.isDark(t,e+6)&&(i+=40);for(var e=0;e<h;e++)for(var t=0;t<h-6;t++)n.isDark(t,e)&&!n.isDark(t+1,e)&&n.isDark(t+2,e)&&n.isDark(t+3,e)&&n.isDark(t+4,e)&&!n.isDark(t+5,e)&&n.isDark(t+6,e)&&(i+=40);for(var f=0,e=0;e<h;e++)for(var t=0;t<h;t++)n.isDark(t,e)&&f++;var T=Math.abs(100*f/h/h-50)/5;return i+=T*10,i}};return Se=g,Se}var Ee,Qe;function ht(){if(Qe)return Ee;Qe=1;var s=dt(),l=ct(),o=ut(),a=ft(),g=Je();function n(i,t){this.typeNumber=i,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=n.prototype;return h.addData=function(i){var t=new s(i);this.dataList.push(t),this.dataCache=null},h.isDark=function(i,t){if(i<0||this.moduleCount<=i||t<0||this.moduleCount<=t)throw new Error(i+","+t);return this.modules[i][t]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var i=1;for(i=1;i<40;i++){for(var t=l.getRSBlocks(i,this.errorCorrectLevel),e=new o,c=0,r=0;r<t.length;r++)c+=t[r].dataCount;for(var r=0;r<this.dataList.length;r++){var u=this.dataList[r];e.put(u.mode,4),e.put(u.getLength(),a.getLengthInBits(u.mode,i)),u.write(e)}if(e.getLengthInBits()<=c*8)break}this.typeNumber=i}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(i,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++)this.modules[e][c]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(i,t),this.typeNumber>=7&&this.setupTypeNumber(i),this.dataCache==null&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},h.setupPositionProbePattern=function(i,t){for(var e=-1;e<=7;e++)if(!(i+e<=-1||this.moduleCount<=i+e))for(var c=-1;c<=7;c++)t+c<=-1||this.moduleCount<=t+c||(0<=e&&e<=6&&(c==0||c==6)||0<=c&&c<=6&&(e==0||e==6)||2<=e&&e<=4&&2<=c&&c<=4?this.modules[i+e][t+c]=!0:this.modules[i+e][t+c]=!1)},h.getBestMaskPattern=function(){for(var i=0,t=0,e=0;e<8;e++){this.makeImpl(!0,e);var c=a.getLostPoint(this);(e==0||i>c)&&(i=c,t=e)}return t},h.createMovieClip=function(i,t,e){var c=i.createEmptyMovieClip(t,e),r=1;this.make();for(var u=0;u<this.modules.length;u++)for(var m=u*r,v=0;v<this.modules[u].length;v++){var f=v*r,T=this.modules[u][v];T&&(c.beginFill(0,100),c.moveTo(f,m),c.lineTo(f+r,m),c.lineTo(f+r,m+r),c.lineTo(f,m+r),c.endFill())}return c},h.setupTimingPattern=function(){for(var i=8;i<this.moduleCount-8;i++)this.modules[i][6]==null&&(this.modules[i][6]=i%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)},h.setupPositionAdjustPattern=function(){for(var i=a.getPatternPosition(this.typeNumber),t=0;t<i.length;t++)for(var e=0;e<i.length;e++){var c=i[t],r=i[e];if(this.modules[c][r]==null)for(var u=-2;u<=2;u++)for(var m=-2;m<=2;m++)u==-2||u==2||m==-2||m==2||u==0&&m==0?this.modules[c+u][r+m]=!0:this.modules[c+u][r+m]=!1}},h.setupTypeNumber=function(i){for(var t=a.getBCHTypeNumber(this.typeNumber),e=0;e<18;e++){var c=!i&&(t>>e&1)==1;this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=c}for(var e=0;e<18;e++){var c=!i&&(t>>e&1)==1;this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=c}},h.setupTypeInfo=function(i,t){for(var e=this.errorCorrectLevel<<3|t,c=a.getBCHTypeInfo(e),r=0;r<15;r++){var u=!i&&(c>>r&1)==1;r<6?this.modules[r][8]=u:r<8?this.modules[r+1][8]=u:this.modules[this.moduleCount-15+r][8]=u}for(var r=0;r<15;r++){var u=!i&&(c>>r&1)==1;r<8?this.modules[8][this.moduleCount-r-1]=u:r<9?this.modules[8][15-r-1+1]=u:this.modules[8][15-r-1]=u}this.modules[this.moduleCount-8][8]=!i},h.mapData=function(i,t){for(var e=-1,c=this.moduleCount-1,r=7,u=0,m=this.moduleCount-1;m>0;m-=2)for(m==6&&m--;;){for(var v=0;v<2;v++)if(this.modules[c][m-v]==null){var f=!1;u<i.length&&(f=(i[u]>>>r&1)==1);var T=a.getMask(t,c,m-v);T&&(f=!f),this.modules[c][m-v]=f,r--,r==-1&&(u++,r=7)}if(c+=e,c<0||this.moduleCount<=c){c-=e,e=-e;break}}},n.PAD0=236,n.PAD1=17,n.createData=function(i,t,e){for(var c=l.getRSBlocks(i,t),r=new o,u=0;u<e.length;u++){var m=e[u];r.put(m.mode,4),r.put(m.getLength(),a.getLengthInBits(m.mode,i)),m.write(r)}for(var v=0,u=0;u<c.length;u++)v+=c[u].dataCount;if(r.getLengthInBits()>v*8)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+v*8+")");for(r.getLengthInBits()+4<=v*8&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=v*8||(r.put(n.PAD0,8),r.getLengthInBits()>=v*8));)r.put(n.PAD1,8);return n.createBytes(r,c)},n.createBytes=function(i,t){for(var e=0,c=0,r=0,u=new Array(t.length),m=new Array(t.length),v=0;v<t.length;v++){var f=t[v].dataCount,T=t[v].totalCount-f;c=Math.max(c,f),r=Math.max(r,T),u[v]=new Array(f);for(var w=0;w<u[v].length;w++)u[v][w]=255&i.buffer[w+e];e+=f;var N=a.getErrorCorrectPolynomial(T),L=new g(u[v],N.getLength()-1),x=L.mod(N);m[v]=new Array(N.getLength()-1);for(var w=0;w<m[v].length;w++){var C=w+x.getLength()-m[v].length;m[v][w]=C>=0?x.get(C):0}}for(var M=0,w=0;w<t.length;w++)M+=t[w].totalCount;for(var B=new Array(M),H=0,w=0;w<c;w++)for(var v=0;v<t.length;v++)w<u[v].length&&(B[H++]=u[v][w]);for(var w=0;w<r;w++)for(var v=0;v<t.length;v++)w<m[v].length&&(B[H++]=m[v][w]);return B},Ee=n,Ee}var de={},ze;function pt(){if(ze)return de;ze=1,Object.defineProperty(de,"__esModule",{value:!0});var s=Object.assign||function(e){for(var c=1;c<arguments.length;c++){var r=arguments[c];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u])}return e},l=qe(),o=n(l),a=We(),g=n(a);function n(e){return e&&e.__esModule?e:{default:e}}function h(e,c){var r={};for(var u in e)c.indexOf(u)>=0||Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u]);return r}var i={bgColor:o.default.oneOfType([o.default.object,o.default.string]).isRequired,bgD:o.default.string.isRequired,fgColor:o.default.oneOfType([o.default.object,o.default.string]).isRequired,fgD:o.default.string.isRequired,size:o.default.number.isRequired,title:o.default.string,viewBoxSize:o.default.number.isRequired,xmlns:o.default.string},t=(0,a.forwardRef)(function(e,c){var r=e.bgColor,u=e.bgD,m=e.fgD,v=e.fgColor,f=e.size,T=e.title,w=e.viewBoxSize,N=e.xmlns,L=N===void 0?"http://www.w3.org/2000/svg":N,x=h(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return g.default.createElement("svg",s({},x,{height:f,ref:c,viewBox:"0 0 "+w+" "+w,width:f,xmlns:L}),T?g.default.createElement("title",null,T):null,g.default.createElement("path",{d:u,fill:r}),g.default.createElement("path",{d:m,fill:v}))});return t.displayName="QRCodeSvg",t.propTypes=i,de.default=t,de}var Fe;function gt(){if(Fe)return ne;Fe=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.QRCode=void 0;var s=Object.assign||function(f){for(var T=1;T<arguments.length;T++){var w=arguments[T];for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&(f[N]=w[N])}return f},l=qe(),o=r(l),a=Ge(),g=r(a),n=ht(),h=r(n),i=We(),t=r(i),e=pt(),c=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function u(f,T){var w={};for(var N in f)T.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(f,N)&&(w[N]=f[N]);return w}var m={bgColor:o.default.oneOfType([o.default.object,o.default.string]),fgColor:o.default.oneOfType([o.default.object,o.default.string]),level:o.default.string,size:o.default.number,value:o.default.string.isRequired},v=(0,i.forwardRef)(function(f,T){var w=f.bgColor,N=w===void 0?"#FFFFFF":w,L=f.fgColor,x=L===void 0?"#000000":L,C=f.level,M=C===void 0?"L":C,B=f.size,H=B===void 0?256:B,E=f.value,R=u(f,["bgColor","fgColor","level","size","value"]),A=new h.default(-1,g.default[M]);A.addData(E),A.make();var Q=A.modules;return t.default.createElement(c.default,s({},R,{bgColor:N,bgD:Q.map(function(Y,J){return Y.map(function(j,_){return j?"":"M "+_+" "+J+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:x,fgD:Q.map(function(Y,J){return Y.map(function(j,_){return j?"M "+_+" "+J+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:T,size:H,viewBoxSize:Q.length}))});return ne.QRCode=v,v.displayName="QRCode",v.propTypes=m,ne.default=v,ne}var mt=gt();const vt=Ve(mt);function wt(){return d.jsxs("div",{className:"qrcode",children:[d.jsx("h1",{style:{fontSize:"200%",marginBottom:"5%"},children:"Or scan the Qr-Code:"}),d.jsx(vt,{size:256,style:{height:"auto",maxWidth:"100%",width:"50%"},value:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",viewBox:"0 0 256 256"})]})}function xt({gameData:s,playerData:l,pawnData:o}){return d.jsxs("div",{children:[d.jsx("div",{className:"header",children:d.jsxs("h1",{children:["Mid",d.jsx("span",{style:{color:"red"},children:"Evil"})]})}),d.jsxs("div",{className:"info-row",children:[d.jsx(st,{players:l,pawns:o}),d.jsxs("div",{className:"join-column",children:[d.jsx(tt,{game:s}),d.jsx(wt,{})]})]})]})}function Ue({playerData:s,pawnData:l,pawnState:o,dieAction:a,player_id:g,showActions:n}){const h=s.find(f=>f.id===g);if(!h)return null;const i=l?.filter(f=>f.owner_id===g)||[],t=4*10,e=s.findIndex(f=>f.id===g),c=(a?.filter(f=>f.player_id===g)||[]).sort((f,T)=>f.mode==="move"?-1:T.mode==="move"?1:0),r=f=>l?.find(T=>T.id===f)?.pawn_name??"Unknown",u=f=>o?.filter(T=>T.pawn_id===f)||[],m=f=>{switch(f.toLowerCase()){case"shield":return"ðŸ›¡ï¸";case"drunk":return"ðŸº";case"poisoned":return"â˜ ï¸";case"frozen":return"â„ï¸";case"burning":return"ðŸ”¥";default:return"âœ¨"}},v=n&&d.jsx("div",{className:"w-1/3 bg-white/30 flex flex-row justify-evenly items-center px-2 text-xs font-semibold text-white border-white/50 border-l",children:c.map(f=>{const T=f.mode==="action",w={1:"ðŸ›¡ï¸",2:"âœ¨",3:"ðŸŽ²",4:"âš”ï¸",5:"ðŸ¹",6:"ðŸº"};return d.jsxs("div",{className:"text-center mx-1",children:[d.jsx("div",{className:"uppercase text-[10px] text-white/70",children:f.mode}),d.jsx("div",{className:"text-white text-base font-bold",children:T?`${w[f.die_value]||"ðŸŽ²"}`:`ðŸŽ² ${f.die_value}`}),d.jsx("div",{className:"text-[11px] capitalize",children:f.mode}),d.jsxs("div",{className:"text-[10px] mt-1",children:[d.jsxs("span",{className:"block",children:["ðŸŸ¢ ",r(f.own_pawn)]}),f.target_pawn!=null&&d.jsxs("span",{className:"block",children:["ðŸ”´ ",r(f.target_pawn)]})]})]},f.id)})});return d.jsxs("div",{className:"h-[14vh] w-[24rem] rounded-xl flex overflow-hidden border-2 shadow-md",style:{backgroundColor:h.color||"#ccc",borderColor:"rgba(255,255,255,0.3)"},children:[g%2===0&&v,d.jsxs("div",{className:"w-2/3 p-2 flex flex-col justify-between text-white",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-white opacity-90"}),d.jsx("div",{className:"font-bold text-sm truncate",children:h.name})]}),d.jsx("div",{className:`text-xs font-bold px-2 py-[2px] rounded-full ${h.is_ready?"bg-green-500 text-white":"bg-red-500 text-white"}`,title:h.is_ready?"Ready":"Not Ready",children:h.is_ready?"READY":"WAIT"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:i.map(f=>{const T=u(f.id);return d.jsxs("div",{children:[d.jsxs("div",{className:"font-semibold truncate",children:[f.pawn_name," - ",f.position===-1?"BaseðŸ¦":f.position===-2?"HomeðŸ ":t+e*10-f.position+1]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1 text-[12px]",children:T.map(w=>d.jsxs("span",{className:"px-1 rounded-full bg-white/30",title:w.state,children:[m(w.state)," ",w.counter]},w.state))})]},f.id)})})]}),g%2!==0&&v]})}function He(s,l,o){const a={spaces:[],room_code:"",player_count:s,bases:[],homes:[]},n=120*3,h=2*Math.PI/(s*10),i=[];a.spaces.push({x:0,y:0,color:"pink"});let t=0;for(let e=1;e<=s*10;e++){const c=h*(e-1),r=Math.cos(c)*n,u=Math.sin(c)*n;o.includes(e)?a.spaces.push({x:r,y:u,color:"red"}):e%10===1?(i.push(c),a.spaces.push({x:r,y:u,color:l[t]?.color||"black"}),t++):a.spaces.push({x:r,y:u,color:"lightblue"})}for(let e=0;e<s;e++){const c=l[e]?.color||"white",r=i[e],u=-Math.cos(r),m=-Math.sin(r),v=Math.cos(r)*n,f=Math.sin(r)*n,T=[];for(let A=1;A<=4;A++)A===1?T.push({x:v+A*u*40,y:f+A*m*40,color:c}):T.push({x:v+(A-1)*u*30+u*40,y:f+(A-1)*m*30+m*40,color:c});a.bases.push(T);const w=(e+4)%s,N=i[w],L=Math.cos(N),x=Math.sin(N),C=L*(n+40),M=x*(n+40),B=-x,H=L,E=10,R=[{x:C+B*-E+L*-E,y:M+H*-E+x*-E,color:c},{x:C+B*E+L*-E,y:M+H*E+x*-E,color:c},{x:C+B*-E+L*E,y:M+H*-E+x*E,color:c},{x:C+B*E+L*E,y:M+H*E+x*E,color:c}];a.homes.push(R)}return a}function yt({playerCount:s=12,pawnData:l,pawnStatesData:o,playerData:a,actionMessage:g,swordSwings:n,setSwordSwings:h,redSquares:i,arrowAnimations:t}){const[e,c]=U.useState(He(s,a,[]));if(U.useEffect(()=>{c(He(s,a,i))},[s,l,a,n,i]),!e)return d.jsx("div",{children:"Loading board..."});const r=[...e.spaces.map(x=>x.x),...e.bases.flat().map(x=>x.x),...e.homes.flat().map(x=>x.x)],u=[...e.spaces.map(x=>x.y),...e.bases.flat().map(x=>x.y),...e.homes.flat().map(x=>x.y)],m=Math.min(...r),v=Math.max(...r),f=Math.min(...u),T=Math.max(...u),w=v-m+100,N=T-f+60,L=x=>({position:"absolute",left:x.x-m+50,top:x.y-f+50,width:20,height:20,borderRadius:"50%",backgroundColor:x.color,transform:"translate(-50%, -50%)",transition:"all 0.3s ease"});return d.jsx(d.Fragment,{children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx("div",{style:{marginBottom:"0px",fontSize:"18px",fontWeight:"bold",color:"#333",backgroundColor:"#f8f9fa",border:"1px solid #ccc",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"ðŸº â†’ ðŸŽ²1 â†’ ðŸŽ²2 â†’ ðŸŽ²3 â†’ ðŸŽ²4 â†’ ðŸŽ²5 â†’ ðŸŽ²6 â†’ ðŸ›¡ï¸ â†’ âœ¨ â†’ ðŸŽ² â†’ âš”ï¸ â†’ ðŸ¹"}),g&&d.jsx("div",{style:{marginBottom:"0px",fontSize:"18px",fontWeight:"bold",color:"#333",backgroundColor:"#f8f9fa",border:"1px solid #ccc",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:g}),d.jsxs("div",{style:{position:"relative",width:`${w}px`,height:`${N}px`,margin:"0px auto"},children:[e.spaces.map((x,C)=>d.jsx("div",{style:L(x),title:`Space ${C} (${x.x.toFixed(1)}, ${x.y.toFixed(1)})`},`space-${C}`)),e.bases.map((x,C)=>x.map((M,B)=>d.jsx("div",{style:{...L(M),backgroundColor:M.color||"blue",border:"2px solid white"},title:`Base P${C} (${B})`},`base-${C}-${B}`))),e.homes.map((x,C)=>x.map((M,B)=>d.jsx("div",{style:{...L(M),backgroundColor:M.color||"green",border:"2px solid white"},title:`Home P${C} (${B})`},`home-${C}-${B}`))),l.map(x=>{const C=a.find(R=>R.id===x.owner_id);if(!C||!C.color)return null;const M=o.filter(R=>R.pawn_id===x.id),B=M.some(R=>R.state==="shield"&&R.counter>0),H=M.some(R=>R.state==="drunk"&&R.counter>0);let E=null;if(x.position>=0)E=e.spaces[x.position];else if(x.position===-1){const R=e.bases[a.indexOf(C)],A=R.length-1-l.filter(Q=>Q.owner_id===C.id&&Q.position===-1).findIndex(Q=>Q.id===x.id);E=R[A]}else if(x.position===-2){const R=e.homes[a.indexOf(C)],A=l.filter(Q=>Q.owner_id===C.id&&Q.position===-2).findIndex(Q=>Q.id===x.id);E=R[A]}return E?d.jsxs("div",{children:[d.jsxs("div",{style:{position:"absolute",left:E.x-m+50,top:E.y-f+50,width:20,height:20,borderRadius:"50%",backgroundColor:C.color,transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 0 5px rgba(0,0,0,0.2)",transition:"all 0.3s ease",zIndex:2},title:`Pawn ${x.pawn_name} (${x.position})`,children:[d.jsx("div",{style:{width:10,height:10,borderRadius:"50%",backgroundColor:"white"}}),(B||H)&&d.jsxs("div",{style:{position:"absolute",bottom:-6,right:-6,display:"flex",gap:2,fontSize:12},children:[B&&d.jsx("span",{children:"ðŸ›¡ï¸"}),H&&d.jsx("span",{children:"ðŸº"})]})]}),t.map(({id:R,fromIndex:A,toIndex:Q})=>{console.log(t);const Y=e.spaces[Q],J=A===-1?{x:Y.x+5,y:Y.y}:e.spaces[A];if(!J||!Y)return null;const j=Y.x-J.x,_=Y.y-J.y,y=Math.atan2(_,j)*(180/Math.PI),I=Math.sqrt(j*j+_*_);return d.jsx("div",{style:{position:"absolute",left:J.x-m+50,top:J.y-f+50,transform:`rotate(${y}deg)`,transformOrigin:"left center",pointerEvents:"none",zIndex:10,height:20,overflow:"visible"},children:d.jsx("div",{style:{position:"relative",animation:`flyArrow ${I/500}s linear forwards`,width:I,fontSize:20},children:"ðŸ¹"})},R)}),n.filter(R=>R.pawnId===x.id).map(R=>d.jsx("div",{style:{position:"absolute",left:E.x-m+22,top:E.y-f+22,width:60,height:60,pointerEvents:"none",userSelect:"none",zIndex:5,transformOrigin:"50% 50%",animation:"sword-orbit 0.6s linear",transform:"translate(-50%, -50%)"},onAnimationEnd:()=>{h(A=>A.filter(Q=>Q.key!==R.key))},children:d.jsx("div",{style:{position:"absolute",top:"50%",left:"100%",transform:"translate(-50%, -50%)",fontSize:24},children:"âš”ï¸"})},R.key)),d.jsx("div",{style:{position:"absolute",left:E.x-m+50,top:E.y-f+34,fontSize:10,fontWeight:"bold",color:C.color,backgroundColor:"white",padding:"1px 4px",borderRadius:4,boxShadow:"0 0 2px rgba(0,0,0,0.2)",transform:"translate(-50%, -50%)",whiteSpace:"nowrap",zIndex:1},children:x.pawn_name})]},`pawn-${x.id}`):null})]})]})})}function bt({playerData:s,pawnData:l,pawnState:o,dieAction:a,showActions:g,hostState:n,actionMessage:h,swordSwings:i,setSwordSwings:t,redSquares:e,arrowAnimations:c}){const r=s.filter((m,v)=>v%2===0).slice(0,6),u=s.filter((m,v)=>v%2===1).slice(0,6);return U.useEffect(()=>{console.log("Host state changed:",n)},[n]),d.jsxs("div",{className:"w-screen h-screen flex items-center justify-center bg-white",children:[d.jsx("div",{className:"flex flex-col justify-center items-end h-[90vh] space-y-4 pr-4",children:r.map(m=>d.jsx(Ue,{playerData:s,pawnData:l,pawnState:o,dieAction:a,player_id:m.id,showActions:g},m.id))}),d.jsx(yt,{playerCount:s?.length>3?s.length:4,pawnData:l,playerData:s,pawnStatesData:o,actionMessage:h,swordSwings:i,setSwordSwings:t,redSquares:e,arrowAnimations:c}),d.jsx("div",{className:"flex flex-col justify-center items-start h-[90vh] space-y-4 pl-4",children:u.map(m=>d.jsx(Ue,{playerData:s,pawnData:l,pawnState:o,dieAction:a,player_id:m.id,showActions:g},m.id))})]})}function Pt(){const[s,l]=U.useState(null),[o,a]=U.useState([]),[g,n]=U.useState([]),[h,i]=U.useState([]),[t,e]=U.useState([]),[c,r]=U.useState(null),[u,m]=U.useState("preparation"),[v,f]=U.useState(u==="simulation"||u==="simulating"||u==="actions"),[T,w]=U.useState("Waiting for players to chook a banger move..."),[N,L]=U.useState([]),[x,C]=U.useState([]),[M,B]=U.useState([]);U.useEffect(()=>{const _=new URLSearchParams(window.location.search).get("roomCode"),y=()=>{fetch(K+`game.php?roomCode=${_}`).then(P=>{if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);return P.json()}).then(P=>{P.game.state!==2?(l(P.game),a(P.players),n(P.pawns),i(P.pawn_states),e(P.die_actions),console.log(P)):console.log("Game is in simulation state, not updating game data.");const q=P.players||null;switch(P.game.state){case 0:m("preparation"),f(!1);break;case 1:m("picking"),f(!1);break;case 2:m("simulation"),f(!0);break}P.game.state===0&&q&&q.length>0&&q.filter(O=>O.is_ready).length===q.length&&(H(1,0,P.game.room_code),E(P.players),R(P.die_actions),_t(P.players),m("picking"),w("Waiting for players to chook a banger move...")),P.game.state===1&&q&&q.length>0&&q.filter(O=>O.is_ready).length===q.length&&(H(2,0,P.game.room_code),E(P.players),f(!0),A(P.die_actions,P.pawns,P.players,P.game,P.pawn_states),m("simulation"),w("Let's see who got cooked :)"))}).catch(P=>{console.error("Fetch error:",P),r(P.message)})};y();const I=setInterval(y,5e3);return()=>clearInterval(I)},[]);function H(j,_,y){fetch(`${K}game.php`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomCode:y,state:j,turn:_})}).then(I=>I.json()).then(I=>{I.success?l(I.game):r(I.message||"Failed to update game state.")}).catch(()=>{r("Network error while updating game state.")})}async function E(j){if(j){for(const _ of j.filter(y=>y.is_ready)){const y={playerId:_.id,is_ready:!1};try{const P=await(await fetch(`${K}player.php`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json();P.success||(console.error(`Failed to unready player ${_.id}:`,P.message),r(P.message||`Failed to unready player ${_.id}.`))}catch(I){console.error(`Network error for player ${_.id}:`,I),r(`Network error while unreadying player ${_.id}.`)}}a(j.map(_=>({..._,is_ready:!1})))}}async function R(j){if(console.log("Deleting all dice actions...",j),!!j){for(const _ of j){const y={playerId:_.player_id};try{const P=await(await fetch(`${K}die_action.php`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json();P.success||(console.error(`Failed to delete die action ${_.player_id}:`,P.message),r(P.message||`Failed to delete die action ${_.player_id}.`))}catch(I){console.error(`Network error for die action ${_.player_id}:`,I),r(`Network error while deleting die action ${_.player_id}.`)}}e([])}}const A=async(j,_,y,I,P)=>{console.log("Executing simulation...");const q=4*10;let O=[..._],G=P.map(b=>({...b,counter:b.counter}));n([...O]),i([...G]);const ie=j.filter(b=>b.mode==="move"),ce=j.filter(b=>b.mode==="action");ce.sort((b,te)=>b.die_value-te.die_value);const ke={1:"ðŸ›¡ï¸ Shield",2:"âœ¨ Teleport",3:"ðŸŽ² Double Move",4:"âš”ï¸ Sword",5:"ðŸ¹ Bow",6:"ðŸº Drunk"};await new Promise(b=>setTimeout(b,1e3));const Ce=ce.filter(b=>b.die_value===6);if(Ce.length!==0){w(`Executing action: ${ke[6]}...`),await new Promise(b=>setTimeout(b,1e3));for(const b of Ce){if(b.target_pawn==null){console.log("Pawn tried to use Drunk but no target_pawn was provided.");break}const $=G.filter(F=>F.pawn_id===b.target_pawn).filter(F=>F.state==="shield").some(F=>F.counter>0),p=O.find(F=>F.id===b.target_pawn);if(!p){console.log(`Target pawn ${b.target_pawn} not found for Drunk effect`);break}if($){console.log(`Pawn ${p.id} is shielded and cannot be made drunk.`);continue}G.push({id:-1,pawn_id:p.id,state:"drunk",counter:3}),console.log(`Pawn used Drunk on Pawn ${p.id}`)}}ie.sort((b,te)=>b.die_value-te.die_value),console.log("Move Dice:",ie);const X=y.length*10<40?40:y.length*10;for(let b=1;b<=6;b++){const oe=[...ie.filter($=>$.die_value===b)].sort(()=>Math.random()-.5);if(oe.length!==0){w(`Moving pawns with step ${b}...`),await new Promise($=>setTimeout($,1e3));for(const $ of oe){const p=O.find(W=>W.id===$.own_pawn);if(!p)continue;const F=y.findIndex(W=>W.id===$.player_id),se=G.filter(W=>W.pawn_id===p.id).filter(W=>W.state==="drunk").some(W=>W.counter>0);if(p.position===-1)if(b===6)p.position=F*10+1,console.log(`Pawn ${p.id} entered board at position ${p.position}`);else{console.log(`Pawn ${p.id} is in base and cannot move with roll ${b}`);continue}else p.position>0?(se?(p.position=(p.position-1+b+X)%X+1,console.log(`Pawn ${p.id} is drunk and moved backwards ${b} steps to position ${p.position}`)):(p.position=(p.position-1+b+X)%X+1,console.log(`Pawn ${p.id} moved ${b} steps to position ${p.position}`)),p.position==(q+1+F*10)%X&&(p.position=-2)):console.log(`Pawn ${p.id} is in base and cannot move with roll ${b}`);p.position>0&&O.forEach(W=>{W.id!==p.id&&W.position===p.position&&(W.position=-1,console.log(`Pawn ${p.id} landed on Pawn ${W.id}, sending ${W.id} to base`))})}n([...O]),i([...G]),await new Promise($=>setTimeout($,5e3))}}for(let b=1;b<=6;b++){const oe=[...ce.filter($=>$.die_value===b)].sort(()=>Math.random()-.5);if(oe.length!==0){w(`Executing action: ${ke[b]||`Unknown (${b})`}...`),await new Promise($=>setTimeout($,1e3));for(const $ of oe){const p=O.find(F=>F.id===$.own_pawn);if(p)switch(b){case 1:G.push({id:-1,pawn_id:p.id,state:"shield",counter:3}),console.log(`Pawn ${p.id} executed Schild action`);break;case 2:if($.target_pawn==null){console.log(`Pawn ${p.id} tried to TP but no target_pawn was provided.`);break}const F=O.find(k=>k.id===$.target_pawn);if(!F){console.log(`Pawn ${p.id} tried to TP but target_pawn ${$.target_pawn} was not found.`);break}[p.position,F.position]=[F.position,p.position],console.log(`Pawn ${p.id} swapped with Pawn ${F.id}`);break;case 3:const ue=ie.find(k=>k.player_id===$.player_id);if(!ue){console.log(`Pawn ${p.id} has no move die to double move`);break}const Z=ue.die_value,se=y.findIndex(k=>k.id===$.player_id),Ze=G.filter(k=>k.pawn_id===p.id).filter(k=>k.state==="drunk").some(k=>k.counter>0);if(p.position===-1)if(Z===6)p.position=se*10+1,console.log(`Pawn ${p.id} entered board at position ${p.position}`);else{console.log(`Pawn ${p.id} is in base and cannot move with roll ${Z}`);continue}else p.position>0?(Ze?(p.position=(p.position+1+Z+X)%X+1,console.log(`Pawn ${p.id} is drunk and moved backwards ${Z} steps to position ${p.position}`)):(p.position=(p.position-1+Z+X)%X+1,console.log(`Pawn ${p.id} moved ${Z} steps to position ${p.position}`)),p.position==(q+1+se*10)%X&&(p.position=-2)):console.log(`Pawn ${p.id} is in base and cannot move with roll ${Z}`);p.position>0&&O.forEach(k=>{k.id!==p.id&&k.position===p.position&&(k.position=-1,console.log(`Pawn ${p.id} landed on Pawn ${k.id}, sending ${k.id} to base`))});break;case 4:if(L(k=>[...k,{pawnId:p.id,key:`${p.id}-${Date.now()}`}]),p.position===-1){const z=y.findIndex(S=>S.id===$.player_id)*10+1;B(S=>[...S,z]),O.forEach(S=>{const V=G.filter(D=>D.pawn_id===S.id).filter(D=>D.state==="shield").some(D=>D.counter>0);S.owner_id!==p.owner_id&&S.position===z&&!V&&(S.position=-1,console.log(`Pawn ${p.id} used Zwaard and hit enemy pawn ${S.id} at ${z}`))})}else if(p.position>0)for(let k=-2;k<=2;k++){if(k===0)continue;const z=(p.position-1+k+X)%X+1;B(S=>[...S,z]),O.forEach(S=>{const V=G.filter(D=>D.pawn_id===S.id).filter(D=>D.state==="shield").some(D=>D.counter>0);S.owner_id!==p.owner_id&&S.position===z&&!V&&(S.position=-1,console.log(`Pawn ${p.id} used Zwaard and hit enemy pawn ${S.id} at ${z}`))})}else console.log(`Pawn ${p.id} is in base and cannot use Zwaard action`);break;case 5:const ae=[];if(p.position===-1){const z=y.findIndex(S=>S.id===$.player_id)*10+1;B(S=>[...S,z]),ae.push({id:Date.now(),fromIndex:z,toIndex:z}),O.forEach(S=>{const V=G.filter(D=>D.pawn_id===S.id).filter(D=>D.state==="shield").some(D=>D.counter>0);S.owner_id!==p.owner_id&&S.position===z&&!V&&(S.position=-1,console.log(`Pawn ${p.id} used Boog and hit enemy pawn ${S.id} at ${z}`))}),C(S=>[...S,...ae])}else if(p.position>0){for(let k=1;k<=5;k++){const z=(p.position-1+k+X)%X+1;B(S=>[...S,z]),ae.push({id:Date.now()+k,fromIndex:p.position,toIndex:z}),O.forEach(S=>{const V=G.filter(D=>D.pawn_id===S.id).filter(D=>D.state==="shield").some(D=>D.counter>0);S.owner_id!==p.owner_id&&S.position===z&&!V&&(S.position=-1,console.log(`Pawn ${p.id} used Boog and hit enemy pawn ${S.id} at ${z}`))})}C(k=>[...k,...ae])}else console.log(`Pawn ${p.id} is in base and cannot use bow action`);break}}n([...O]),i([...G]),await new Promise($=>setTimeout($,5e3)),B([]),L([]),C([])}}const Ke=G.map(b=>({...b,counter:b.counter-1}));console.log("Repeating simulation..."),console.log("Updated Pawn Data:",O),console.log("Updated Pawn States:",G),Q(O,o)?console.log("Win conditions met!"):(Y(O),J(Ke),await new Promise(b=>setTimeout(b,1e3)),H(1,(I?.turn??0)+1,I?.room_code||"0"),E(y),f(!1),m("picking"),w("Waiting for players to chook a banger move..."))};function Q(j,_){for(const y of _)if(j.filter(q=>q.owner_id===y.id).every(q=>q.position===-2))return console.log(`Player ${y.id} has won the game!`),!0;return!1}function Y(j){for(const _ of j)console.log("Pushing pawn data:",_),fetch(`${K}pawn.php`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(y=>y.json()).then(y=>{y.success||console.error("Failed to update pawns:",y.message)}).catch(y=>console.error("Network error while updating pawns:",y))}function J(j){for(const _ of j)console.log("Pushing pawn state:",_),_.id===-1?fetch(`${K}pawn_state.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(y=>y.json()).then(y=>{y.success||console.error("Failed to create pawn state:",y.message)}).catch(y=>console.error("Network error while creating pawn state:",y)):_.counter<=0?fetch(`${K}pawn_state.php`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_.id})}).then(y=>y.json()).then(y=>{y.success||console.error("Failed to delete pawn state:",y.message)}).catch(y=>console.error("Network error while deleting pawn state:",y)):fetch(`${K}pawn_state.php`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(y=>y.json()).then(y=>{y.success||console.error("Failed to update pawn state:",y.message)}).catch(y=>console.error("Network error while updating pawn state:",y))}return d.jsxs(d.Fragment,{children:[u==="preparation"&&d.jsx(xt,{gameData:s,playerData:o,pawnData:g}),(u==="picking"||u==="simulation"||u==="simulating")&&d.jsx(bt,{pawnState:h,dieAction:t,playerData:o,pawnData:g,showActions:v,hostState:u,actionMessage:T,swordSwings:N,setSwordSwings:L,redSquares:M,arrowAnimations:x})]})}et.createRoot(document.getElementById("root")).render(d.jsx(U.StrictMode,{children:d.jsx(Pt,{})}));function _t(s){const l=["red","blue","green","purple","orange","pink","brown","teal","gold","limegreen","crimson","darkgoldenrod"];s.forEach((o,a)=>{o.color=l[a%l.length]});for(const o of s)fetch(`${K}player.php`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:o.id,color:o.color})}).then(a=>a.json()).then(a=>{a.success||console.error(`Failed to update player ${o.id} color:`,a.message)}).catch(a=>console.error(`Network error while updating player ${o.id} color:`,a))}
